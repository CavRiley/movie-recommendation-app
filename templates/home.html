{% extends "base.html" %}

{% block title %}Home | Polyglot Movie Recs{% endblock %}

{% block content %}
<section class="hero">
    <h2>Polyglot Movie Recs</h2>
    <p>
        this is a simple page that initially takes the first 8 movies from redis to display and allows you to search for more movies by title
    </p>
</section>

<section class="movie-section">
    <h3>Sample Movies</h3>

    {% if movies %}
        <div class="movie-grid">
            {% for movie in movies %}
                <article class="movie-card">
                    <h4 class="movie-title">{{ movie.title }}</h4>
                    {% if movie.genres %}
                        <p class="movie-genres">{{ movie.genres }}</p>
                    {% endif %}
                    <p class="movie-rating">
                        {% if movie.avg_rating is not none %}
                            ⭐ {{ "%.1f"|format(movie.avg_rating) }} / 5
                        {% else %}
                            No ratings yet
                        {% endif %}
                    </p>
                </article>
            {% endfor %}
        </div>

        <form action="{{ url_for('search') }}" method="GET">
          <div class="search_bar">
            <label for="term">Search Movies: </label>
            <input class="input" id="term" name="term" type="text"
              value="{{ request.args.get('term','') }}"
              placeholder="Star Wars, Indiana Jones">
            <button class="btn" type="submit">Search</button>
          </div>
        </form>

    {% else %}
        <p>No movies found in Redis. Double-check that you’ve populated keys like <code>movie:&lt;id&gt;</code>.</p>
    {% endif %}
</section>
{% endblock %}
